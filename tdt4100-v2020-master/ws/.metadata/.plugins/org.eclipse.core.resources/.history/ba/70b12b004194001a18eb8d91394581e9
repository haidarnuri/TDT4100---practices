package EksamenKont2015;

public class Unit {
	
	private String symbol = null;
	private Unit base = null;
	private double factor;
	private double offset;
	

	
	
	
	public Unit(String symbol) throws IllegalArgumentException {
		checkValidSymbol(symbol);
        this.symbol=symbol;
    }
	
	 
    public Unit(String symbol, Unit base, double factor, double offset) throws IllegalArgumentException {
        this(symbol,base,factor);
        this.offset=offset;
    }
	
    
    /**
     * Constructor for derived units, e.g. kilometer, milligram and Celcius, derived from meter, gram and Kelwin respectively.
     * A derived unit includes the factor and offset for the linear formula for computing the base unit from the derived one.
     * base-unit-value = derived-unit-value * factor + offset
     * @param symbol The symbol for the derived Unit
     * @param base The base unit, e.g. meter for kilometer, gram for milligram
     * @param factor The factor in the formula, e.g. 1000 for km to m or 0.001 for mg to g. The offset is set to 0.0.
     * @throws IllegalArgumentException if the symbol contains characters that are not alphabetic
     */
    public Unit(String symbol, Unit base, double factor) throws IllegalArgumentException {
        this(symbol);
        this.base=base;
        this.factor=factor;
        
    }
    
    public String getSymbol() {
    	return this.symbol;
    }
    
    public Unit getBase() {
    	return this.base;
    }
    
    
    
    /**
     * Finds the first common unit from which both this and the other Unit is derived.
     * If other is derived from this, then this is returned, or if this is derived from other, then other is returned.
     * Otherwise it finds the first base unit that both are derived from.
     * @param other The other unit.
     * @return The first common unit that is a common base unit for both this and other.
     */
    //Validererer om begge har samme grunnenhet. 
    public Unit findCommonBaseUnit(Unit other) {
    	
        if(getBase().equals(other)) {
        	return other;
        }else if(other.getBase().equals(this)) {
        	return this;
        }else {
        	
        }
    }
    
    
    
    
    
    @Override
    public String toString() {
        return symbol;
    }
     
    
    private void checkIfSameBaeUnit(Unit other) {
    	if(!this.getBase().equals(other.getBase())) {
    		throw new IllegalArgumentException("Not the same base unit");
    	}
    }
	
    
    private void checkValidSymbol(String symbol) {
    	if(!symbol.contains("[a-zA-Z]+")) {
    		throw new IllegalArgumentException("Symbol can only contains letters");
    	}
    }
	
	
	
	
	
}
