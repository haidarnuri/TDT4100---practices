package EksamenKont2016;

import java.util.ArrayList;
import java.util.List;

public class Person {
	
	private List<Course> courses = new ArrayList<>();
	private List<Exam> exams = new ArrayList<>();
	
	private String name;
	
	public Person(String name) {
		//Validerer at navnet ikke er null, tomt eller noe annet enn bokstaver
		validateName(name);
		this.name=name;
	}
	
	public String getName() {
		return this.name;
	}
	
	/**
     * Adds a Course to this Person, if no Course is registered
     * for the same code, year and semester.
     * @param course
     * @return true if the course was added, false otherwise
     */
    public boolean addCourse(Course course) { 
    	boolean addedCourse = false;
    	if(!checkIfContainsCourse(course)) {
    		courses.add(course);
    		addedCourse=true;
    	}
    	return addedCourse; 			
    }
  
    /**
     * Returns whether this Person has a Course with the given code.
     * @param code
     */
    public boolean hasCourse(String code) { 
    	boolean hasCourse =false;
    	for(Course course: courses) {
    		if(course.getCode().equals(code)) {
    			hasCourse=true;
    			break;
    		}
    	}
    	return hasCourse;
    }

    /**
     * Creates and adds an exam to this Person for the provided Course and
     * with the provided grade, but only if this Person has this Course and
     * no passing Exam is registered for that Course.
     * @param course
     * @param grade
     * @return the newly created and added Exam, or null
     */
   
    public Exam addExam(Course course, char grade) { 
    	Exam exam=null;
    	if(!hasCourse(course.getCode())) {
    		return exam;
    	}
    	for(Exam tempExam:exams) {
    		if(tempExam.getCourse().equals(course) && tempExam.isPass()) {
    			exam = null;
    			break;
    		}
    	}
    	exam = new Exam(course, grade);
    	exams.add(exam);
    	return exam;
    }

    /**
     * Gets the exam that was registered last for the provided course code.
     * This is the exam that counts for that course!
     * @param course
     */
    public Exam getLastExam(String code) { 
    	Exam lastExam = null;
    	//Denne teller hvor mange eksamener med denne koden som finnes. 
    	int countExams=0;
    	for(Exam tempExam:exams) {
    		if(tempExam.getCourse().getCode().equals(code)){
    			if(countExams==0) {
    				lastExam=tempExam;
    			}else{
    				if(lastExam.getCourse().compareTo(tempExam.getCourse())<1) {
    					lastExam = tempExam;
    				}
    			}
    			
    		}
    	}
		return lastExam;
    }
    
    /**
     * Returns true of this Person has passed the Course for the provided code.
     * @param code
     */
    public boolean hasPassed(String code) {
    	return getLastExam(code).isPass();
    }
    
    /**
     * Counts the credits this Person has earned.
     */
    public double countCredits() { ... }
}
    
    
    

    
	//Private metoder og main under her. 
    
    private boolean checkIfContainsCourse(Course course) {
    	boolean containsCourse = false;
    	for(Course tempCourse:courses) {
    		if(tempCourse.getCode().equals(course.getCode()) && tempCourse.compareTo(course)==0) {
    			containsCourse=true;
    			break;
    		}
    	}
    	return containsCourse;
    }
    
  
	private void validateName(String name) {
		if(name==null || name.isEmpty()) {
			throw new IllegalArgumentException("Navnet kan ikke være null eller tomt");
		}
		char[] letters = name.toCharArray();
		for(char chars:letters) {
			//Det er greit med mellomrom i navnene. 
			if(!Character.isLetter(chars) && chars!= ' ') {
				throw new IllegalArgumentException("Må inneholde KUN bokstaver");
			}
		}
	}
	
}
