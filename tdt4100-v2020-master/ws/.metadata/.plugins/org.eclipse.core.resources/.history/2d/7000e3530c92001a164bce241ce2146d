package patterns.delegation;


import java.io.IOException;
import java.io.OutputStream;
import java.nio.charset.Charset;


public class StreamLogger implements ILogger{
	
	OutputStream stream;
	String logMessage = new String();
	String format = new String();	
	
	public StreamLogger(OutputStream stream) {
		this.stream=stream;
	}
	
	
	
	
	@Override
	public void log(String severity, String message, Exception exception) {
		setFormatString(this.format);	
		this.logMessage  = String.format(this.format, severity, message, exception);
		byte[] bytes = this.logMessage.getBytes();
		try {
			this.stream.write(bytes);
			this.stream.flush();
			this.stream.close(); 
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
	
	
	public void setFormatString(String formatString) {
		formatString = String.format("%s"+" :"+ " %s" + "(%s)");
	}
	

	
}
