package EksamenKont2019;

import java.time.LocalDateTime;

public class CalculatePrice {
	//Denne klassen lagrer kun verdier for tid og plass
		private double calculatePrice=0;
	
		
	public void valuesForCalculations(Bike bike, LocalDateTime now, LocalDateTime returnTime) {
	        bike.setStartTime(now);
	        bike.setReturnTime(returnTime);
	 }
			
	public void extendRental(Bike bike, LocalDateTime now, LocalDateTime newReturnTime) {
		    	this.calculatePrice+=5;
		    	if(newReturnTime.isAfter(bike.getReturnTime())) {
		    		this.calculatePrice+=10;
		    	}
		    	this.calculatePrice+=bike.getAmount();
		    	bike.setAmount(this.calculatePrice);
		    	bike.setReturnTime(newReturnTime);
		    }
	
	public void returnBike(Person person, Bike bike, LocalDateTime nowTime) {
        //Tenker at hvis han leverer sykkelen før så endrer jeg returtiden til nåværende tid. 
        if(bike.getReturnTime().isAfter(nowTime)) {
        	bike.setReturnTime(nowTime);
        }
        //Legger pga for hver påbegynte time
        int hours = calculateHours(bike.getStart(),bike.getReturnTime());
        this.calculatePrice = bike.getAmount()+10*hours;
        
        
    }
	
	  public int calculateHours(LocalDateTime start, LocalDateTime returnTime) {
	    	return returnTime.getHour()-start.getHour() + 1;
	    }
	   
	
	
}
